server:
  port: 8080

spring:
  application:
    name: customer-registration-service
  security:
    oauth2:
      resourceserver:
        jwt:
          jwk-set-uri: ${KEYCLOAK_JWKS_URI:http://localhost:8088/realms/fineract/protocol/openid-connect/certs}

# CORS Configuration
app:
  cors:
    allowed-origins: ${CORS_ALLOWED_ORIGINS:http://localhost:3000,http://localhost:5173}


# Fineract Configuration
fineract:
  url: ${FINERACT_URL:https://localhost:443}
  tenant: ${FINERACT_TENANT:default}
  # Authentication type: oauth (default) or basic
  auth-type: ${FINERACT_AUTH_TYPE_1:oauth}
  # OAuth settings (used when auth-type=oauth)
  token-url: ${FINERACT_TOKEN_URL:http://fineract:8080/fineract-provider/oauth/token}
  client-id: ${FINERACT_CLIENT_ID:setup-app-client}
  client-secret: ${FINERACT_CLIENT_SECRET:**********}
  # OAuth grant type: client_credentials (default) or password
  grant-type: ${FINERACT_OAUTH_GRANT_TYPE:password}
  # OAuth credentials (used when grant-type=password)
  oauth-username: ${FINERACT_OAUTH_USERNAME:mifos}
  oauth-password: ${FINERACT_OAUTH_PASSWORD:password}
  # Basic auth settings (used when auth-type=basic)
  username: ${FINERACT_USERNAME:mifos}
  password: ${FINERACT_PASSWORD:password}
  # Fineract defaults
  default-office-id: ${DEFAULT_OFFICE_ID:1}
  default-savings-product-id: ${DEFAULT_SAVINGS_PRODUCT_ID:1}
  default-gender-id: ${DEFAULT_GENDER_ID:2}
  # Whether to verify SSL certificate from Fineract (for development with self-signed certs)
  verifySsl: ${FINERACT_VERIFY_SSL:false}

# Actuator Endpoints
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  endpoint:
    health:
      show-details: when_authorized
      probes:
        enabled: true
  health:
    livenessState:
      enabled: true
    readinessState:
      enabled: true

# Logging
logging:
  level:
    root: INFO
    com.adorsys.fineract.registration: ${LOGGING_LEVEL_COM_ADORSYS:TRACE}

# OpenAPI/Swagger
springdoc:
  api-docs:
    path: /api-docs
  swagger-ui:
    path: /swagger-ui.html
    enabled: true

---
# Kubernetes Profile
spring:
  config:
    activate:
      on-profile: kubernetes

# In Kubernetes, use service discovery

fineract:
  url: https://fineract-service:8443
  token-url: http://fineract-service:8443/fineract-provider/oauth/token

# Enable OTLP tracing
management:
  tracing:
    sampling:
      probability: 1.0
  otlp:
    tracing:
      endpoint: ${OTEL_EXPORTER_OTLP_ENDPOINT:http://otel-collector:4318/v1/traces}

# Security properties
