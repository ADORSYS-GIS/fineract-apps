# Fineract Administration UI

This document provides a detailed explanation of the Fineract Administration UI, a single-page application built with React, TypeScript, and Vite. It is designed to manage users (as employees) and other administrative tasks within the Fineract ecosystem.

## Core Functionalities

The Fineract Administration UI provides the following core functionalities:

-   **Employee Management**: Create, view, edit, and manage employees.
-   **User Status**: View the status of users (active, inactive, etc.) from Keycloak.
-   **Password Management**: Reset user passwords and force password changes.
-   **Toast Notifications**: Display toast notifications for user actions.

## Project Structure

The project is structured as follows:

```
├── .env
├── README.md
├── dist/
├── index.html
├── node_modules/
├── package.json
├── src/
│   ├── components/
│   │   ├── CreateUser/
│   │   ├── EditUser/
│   │   ├── PasswordResetModal/
│   │   ├── Toast/
│   │   ├── UserDetails/
│   │   ├── UserForm/
│   │   ├── UserStatusBadge/
│   │   └── UserTable/
│   ├── routes/
│   │   ├── __root.tsx
│   │   ├── index.tsx
│   │   └── users/
│   │       ├── create.tsx
│   │       ├── list.tsx
│   │       └── $userId/
│   │           ├── edit.tsx
│   │           └── index.tsx
│   ├── services/
│   │   ├── api.ts
│   │   ├── employeeApi.ts
│   │   ├── types.ts
│   │   └── userSyncApi.ts
│   ├── index.css
│   ├── main.tsx
│   └── routeTree.gen.ts
├── tsconfig.json
└── vite.config.ts
```

### `src/main.tsx`

This is the entry point of the application. It initializes the `QueryClient` for TanStack Query and the `RouterProvider` for TanStack Router. It also imports the global CSS files and the generated route tree.

### `src/routes/__root.tsx`

This file defines the root layout of the application. It includes the main `AppLayout`, which is composed of a `Sidebar` and a `Navbar`. The `Outlet` component from TanStack Router is used to render the child routes. The `ToastContainer` is also included here to display toast notifications.

### `src/routes/`

This directory contains the route definitions for the application. The file-based routing system from TanStack Router is used to define the routes.

-   `index.tsx`: The home page of the application.
-   `users/list.tsx`: The user list page, with a centered layout. It includes a "Create User" button to navigate to the creation page.
-   `users/create.tsx`: The user creation page.
-   `users/$userId/index.tsx`: The user details page.
-   `users/$userId/edit.tsx`: The user edit page.

### `src/components/`

This directory contains all the React components used in the application. Each component is organized in its own directory, which often contains the view, custom hooks, and types.

-   **`CreateUser`**: This component is responsible for creating a new employee.
-   **`EditUser`**: This component is responsible for editing an existing user.
-   **`PasswordResetModal`**: This component is a modal that allows the administrator to reset a user's password.
-   **`Toast`**: This component is used to display toast notifications.
-   **`UserDetails`**: This component is used to display the details of a user.
-   **`UserForm`**: This directory contains the form validation schemas for creating and editing a user.
-   **`UserStatusBadge`**: This component displays the user's status (e.g., Active, Inactive).
-   **`UserTable`**: This component displays a table of users with search and pagination functionality.

### `src/services/`

This directory contains the services for interacting with the backend APIs.

-   **`api.ts`**: This file configures the Fineract API client with the environment variables.
-   **`employeeApi.ts`**: This file provides functions for interacting with the custom `/v1/adorsys/employees` endpoint to manage employees.
-   **`types.ts`**: Contains TypeScript type definitions for the application, such as the `Employee` type.
-   **`userSyncApi.ts`**: This file serves as an API client for the User Sync Service, which handles interactions with Keycloak for user identity management.

### `src/routeTree.gen.ts`

This file is automatically generated by the TanStack Router plugin. It contains the route tree for the application.

## Routing

The application uses TanStack Router for routing. The routes are defined in the `src/routes` directory using a file-based routing system.

-   **Root Layout (`__root.tsx`)**: Defines the main application layout.
-   **Index Route (`index.tsx`)**: The default route for the application, mapping to `/`.
-   **User Routes (`users/`)**: All routes related to user management are located in the `src/routes/users` directory.
    -   `users/list.tsx`: Displays a list of all users. It maps to `/users/list`.
    -   `users/create.tsx`: A form to create a new user. It maps to `/users/create`.
    -   `users/$userId/index.tsx`: Shows the details of a specific user, mapping to `/users/:userId`.
    -   `users/$userId/edit.tsx`: A form to edit the details of a specific user, mapping to `/users/:userId/edit`.

## State Management

The application uses TanStack Query for state management. It provides a simple and powerful way to fetch, cache, and update data in the application.

## API Interaction

The application interacts with two main backend services:
1.  The Fineract API via the `@fineract-apps/fineract-api` client for core banking functionalities (fetching offices, roles, etc.).
2.  A custom employee management service via `employeeApi.ts`.
3.  The User Sync Service for Keycloak integration via `userSyncApi.ts`.

## API Endpoints

The following primary endpoints are used in the application:

-   **`GET /v1/adorsys/employees`**: Fetches a list of all employees.
-   **`POST /v1/adorsys/employees`**: Creates a new employee.
-   **`GET /v1/adorsys/employees/{userId}`**: Fetches a single employee by their ID.
-   **`PUT /v1/adorsys/employees/{userId}`**: Updates an existing employee.
-   **`GET /v1/offices`**: Fetches a list of all offices.
-   **`GET /v1/roles`**: Fetches a list of all roles.
-   Keycloak-related endpoints via the User Sync Service.

## Functionality Checklist

This checklist can be used to verify that all core functionalities of the application are working correctly.

-   [x] **User List**: The user list is displayed correctly with search and pagination.
-   [x] **User Details**: Clicking on a user navigates to the user details page.
-   [x] **Create User**: A new user/employee can be created successfully.
-   [x] **Edit User**: An existing user can be edited successfully.
-   [x] **Password Reset**: A password reset email can be sent to a user.
-   [x] **User Status**: The user status is displayed correctly.
-   [x] **Toast Notifications**: Toast notifications are displayed for user actions.
-   [x] **API Interaction**: All API endpoints are working correctly.
-   [x] **User Sync**: All user sync functionalities are working correctly.