server:
  port: 8082
  servlet:
    context-path: /

spring:
  application:
    name: payment-gateway-service

  security:
    oauth2:
      resourceserver:
        jwt:
          issuer-uri: ${KEYCLOAK_ISSUER_URI:http://localhost:8080/realms/fineract}
          jwk-set-uri: ${KEYCLOAK_JWK_SET_URI:http://localhost:8080/realms/fineract/protocol/openid-connect/certs}

# MTN MoMo Configuration
mtn:
  momo:
    base-url: ${MTN_BASE_URL:https://sandbox.momodeveloper.mtn.com}
    collection-subscription-key: ${MTN_COLLECTION_KEY:}
    disbursement-subscription-key: ${MTN_DISBURSEMENT_KEY:}
    api-user-id: ${MTN_API_USER_ID:}
    api-key: ${MTN_API_KEY:}
    target-environment: ${MTN_TARGET_ENV:sandbox}
    callback-url: ${MTN_CALLBACK_URL:http://localhost:8082/api/callbacks}
    currency: XAF
    timeout-seconds: 30
    fineract-payment-type-id: ${MTN_FINERACT_PAYMENT_TYPE_ID:1}
    gl-account-code: ${MTN_GL_ACCOUNT_CODE:}

# Orange Money Configuration
orange:
  money:
    base-url: ${ORANGE_BASE_URL:https://api.orange.com/orange-money-webpay/dev/v1}
    token-url: ${ORANGE_TOKEN_URL:https://api.orange.com/oauth/v3/token}
    client-id: ${ORANGE_CLIENT_ID:}
    client-secret: ${ORANGE_CLIENT_SECRET:}
    merchant-code: ${ORANGE_MERCHANT_CODE:}
    callback-url: ${ORANGE_CALLBACK_URL:http://localhost:8082/api/callbacks}
    return-url: ${ORANGE_RETURN_URL:http://localhost:3000/self-service/transactions}
    cancel-url: ${ORANGE_CANCEL_URL:http://localhost:3000/self-service/transactions}
    currency: XAF
    timeout-seconds: 30
    fineract-payment-type-id: ${ORANGE_FINERACT_PAYMENT_TYPE_ID:2}
    gl-account-code: ${ORANGE_GL_ACCOUNT_CODE:}

# Fineract Configuration
fineract:
  url: ${FINERACT_URL:http://localhost:8443/fineract-provider}
  tenant: ${FINERACT_TENANT:default}
  username: ${FINERACT_USERNAME:mifos}
  password: ${FINERACT_PASSWORD:password}
  timeout-seconds: 30
  default-savings-product-id: ${FINERACT_SAVINGS_PRODUCT_ID:1}

# Actuator Configuration
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  endpoint:
    health:
      show-details: when-authorized
      probes:
        enabled: true
  metrics:
    tags:
      application: ${spring.application.name}

# Logging Configuration
logging:
  level:
    root: INFO
    com.adorsys.fineract.gateway: DEBUG
    org.springframework.security: INFO
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"

# OpenAPI Configuration
springdoc:
  api-docs:
    path: /api-docs
  swagger-ui:
    path: /swagger-ui.html
    enabled: true

---
# Kubernetes Profile
spring:
  config:
    activate:
      on-profile: kubernetes

  security:
    oauth2:
      resourceserver:
        jwt:
          issuer-uri: http://keycloak.fineract.svc.cluster.local:8080/realms/fineract
          jwk-set-uri: http://keycloak.fineract.svc.cluster.local:8080/realms/fineract/protocol/openid-connect/certs

fineract:
  url: http://fineract.fineract.svc.cluster.local:8443/fineract-provider

mtn:
  momo:
    callback-url: https://payments.webank.cm/api/callbacks

orange:
  money:
    callback-url: https://payments.webank.cm/api/callbacks
    return-url: https://self-service.webank.cm/transactions
    cancel-url: https://self-service.webank.cm/transactions

logging:
  level:
    root: INFO
    com.adorsys.fineract.gateway: INFO
